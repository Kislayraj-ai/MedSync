<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Appointment PDF Report</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 30px;
            color: #333;
        }

        h1, h2, h3 {
            color: #1e88e5;
            margin-bottom: 10px;
        }

        h2 {
            font-size: 20px;
        }

        p {
            font-size: 14px;
            margin: 4px 0;
        }

        .card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .card-header {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 16px;
            border-bottom: 1px solid #ccc;
            padding-bottom: 5px;
        }

        .badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 5px;
            font-size: 13px;
            color: #fff;
        }

        .bg-success { background-color: #28a745; color: #fff; }
        .bg-danger { background-color: #dc3545; color: #fff; }
        .bg-info { background-color: #17a2b8; color: #fff; }
        .bg-darkgreen { background-color: #006400; color: #fff; }
        .bg-warning { background-color: #f2d201ff; color: #fff; }


        .footer {
            margin-top: 50px;
            font-size: 12px;
            color: #999;
            text-align: center;
        }

        .section-title {
            font-weight: bold;
            color: #1e88e5;
            margin-bottom: 8px;
            font-size: 16px;
        }
    </style>
</head>
<body>

    <h1>Appointment Report</h1>
    <p>Hello {{ username }},</p>
    <p>Here are the details of your appointment:</p>

    <!-- Patient Info -->
    <div class="card">
        <div class="card-header">Patient Information</div>
        <p><strong>Name:</strong> {{ user.first_name }} {{ user.last_name }}</p>
        <p><strong>Contact:</strong> {% if user.phone %} {{ user.phone }} {% else %} N/A {% endif %}</p>
        <p><strong>Email:</strong> {{ user.email }}</p>
    </div>

    <!-- Appointment Info -->
    <div class="card">
        <div class="card-header">Appointment Details</div>
        <p><strong>Date:</strong> {{ appointment.appdate }}</p>
        <p><strong>Time:</strong> {{ appointment.apptime }}</p>
        <p><strong>Doctor:</strong> {{ doctor.first_name }} {{ doctor.last_name }}</p>
        <p>
            <strong>Status:</strong>
            <span class="badge 
                {% if appointment.is_active == "0" %} bg-success
                {% elif appointment.is_active == "1" %} bg-danger
                {% elif appointment.is_active == "2" %} bg-darkgreen
                {% else %} bg-info
                {% endif %}">
                {{ appointment.get_is_active_display }}
            </span>
        </p>
    </div>

    <!-- Payment Info -->
    <div class="card">
        <div class="card-header">Payment Details</div>
        {% if paymenthistory %}
            <p><strong>Amount:</strong> ₹ {{ paymenthistory.amount }}</p>
            <p><strong>Date:</strong> {{ paymenthistory.created_at|date:"M d, Y H:i" }}</p>
            <p>
                <strong>Status:</strong>
                <span class="badge
                    {% if paymenthistory.status == '1' %} bg-success
                    {% elif paymenthistory.status == '0' %} bg-warning
                    {% elif paymenthistory.status == '2' %} bg-darkgreen
                    {% else %} bg-danger
                    {% endif %}">
                    {{ paymenthistory.get_status_display }}
                </span>
            </p>
        {% else %}
            <p>No Payment Record Found</p>
        {% endif %}
    </div>

    <div class="footer">
        Generated by MedSync © {{ now|date:"Y" }}
    </div>
</body>
</html>
